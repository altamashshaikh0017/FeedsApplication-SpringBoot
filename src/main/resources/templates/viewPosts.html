<!DOCTYPE html>
<html xmlns:th="https://www.thymleaf.org">
<head>
<meta charset="UTF-8">
<title>View Posts</title>
<!--  <link rel="stylesheet" href="/CSS/viewPosts.css"> -->
<style>
/* Styles for viewing posts */
h1 {
	color: #333;
	text-align: center;
	margin-top: 20px;
}

ul {
	list-style-type: none;
	padding: 0;
}

li {
	background-color: #fff;
	border: 1px solid #ddd;
	border-radius: 5px;
	padding: 20px;
	margin: 10px 0;
	box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

h2 {
	margin-top: 0;
	color: #007bff;
}

p {
	margin: 10px 0;
}

a {
	display: inline-block;
	margin-top: 10px;
	color: #007bff;
}

a:hover {
	text-decoration: underline;
}

.button-container {
	text-align: center;
	margin-top: 20px;
}

.button {
	display: inline-block;
	padding: 8px 16px;
	margin: 5px;
	font-size: 12px;
	font-weight: bold;
	text-align: center;
	text-decoration: none; /* Removes underline */
	color: #fff;
	background-color: #ffa500; /*Button background color */
	border: none; /* Removes border */
	border-radius: 5px; /* Rounded corners */
	box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Shadow effect */
	transition: background-color 0.3s, box-shadow 0.3s;
	/* Smooth transition for hover effects */
}

.button:hover {
	background-color: #0056b3; /*Darker background on hover */
	box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
	/* Enhanced shadow on hover */
}

.button:active {
	background-color: #004494; /* Even darker background when clicked */
	box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); /* Reduced shadow on click */
}
</style>
</head>
<body>
	<h1>All Posts</h1>

	<div th:if="${#lists.isEmpty(posts)}">
		<p>No posts available.</p>
	</div>

	<div th:if="${!#lists.isEmpty(posts)}">
		<ul>
			<li th:each="post : ${posts}">
				<div>
					<h2 th:text="${post.title}"></h2>
					<p th:text="${post.content}"></p>

					<!-- Show post metadata -->
					<p>
						<em>Posted on: <span
							th:text="${#dates.format(post.createdDate, 'dd MMM yyyy HH:mm')}"></span>
						</em>
					</p>
					<p>
						<em>Posted By:
							 <strong style="color: #007BFF;" th:text="${post.author.name}"></strong>
						</em>
					</p>

					<!-- Show approval status -->
					<p>
						Status: <span th:text="${post.approved ? 'Approved' : 'Pending'}"
							th:style="${post.approved ? 'color:green' : 'color:red'}">
						</span>
					</p>

					<!-- Edit/Delete buttons only for the author -->
					<div th:if="${post.author.userName == loggedInUser}">
						<a th:href="@{'/editPost/' + ${post.pkPostId}}" class="button">Edit</a>
						<a th:href="@{'/deletePost/' + ${post.pkPostId}}" class="button"
							onclick="return confirm('Are you sure you want to delete this post?');">Delete</a>
					</div>

					<hr>
				</div>
			</li>
		</ul>
	</div>

	<div class="button-container">
		<a href="/createPost" class="button">Create a new post</a> <a
			href="/logout" class="button">Logout</a>
	</div>
	<p>Logged in as: <span th:text="${loggedInUser}"></span></p>
	
</body>

</html>